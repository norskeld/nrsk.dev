---
import { tw } from '@nrsk/tw'

import type { ProjectEntry } from '@/api/content'

import Link from '@/components/Link.astro'

export interface Props {
  items: Array<ProjectEntry>
}

const { items } = Astro.props

const sectionClasses = tw`
  flex flex-col gap-4
`

const noteClasses = tw`
  mb-2
  text-gray-800 dark:text-gray-300
`

const headingClasses = tw`
  text-2xl font-semibold
  text-gray-900 dark:text-gray-50
`

const projectsClasses = tw`
  grid gap-4 w-full max-w-[100vw]
  grid-cols-1 sm:grid-cols-2 md:grid-cols-3
  [grid-auto-rows:minmax(0,auto)]
`

const projectClasses = tw`
  flex flex-col gap-2 p-4 rounded-lg transition-all ease-in-out duration-200
  bg-gray-100 dark:bg-gray-400/5
  hover:bg-gray-50 dark:hover:bg-gray-400/10
  hover:shadow-neon
`

const linkClasses = tw`
  group font-medium
`

const descriptionClasses = tw`
  cursor-default
  text-gray-500 dark:text-gray-400
`

const seeAllClasses = tw`
  text-gray-800 dark:text-gray-300
`

const languageClasses = tw`
  transition-colors
  text-gray-500 dark:text-gray-400
  group-hover:text-crayola-500 dark:group-hover:text-crayola-300
`
---

<section class={sectionClasses}>
  <h2 class={headingClasses}>Projects</h2>

  <p class={noteClasses}>Some of my OSS projects.</p>

  <ul class={projectsClasses}>
    {
      items.map((project) => (
        <li class={projectClasses}>
          <div>
            <Link to={project.data.url} class={linkClasses} external underline={false}>
              {project.data.name}
              <span class={languageClasses}>{project.data.language.ext}</span>
            </Link>
          </div>

          <div class={descriptionClasses} set:html={project.data.description} />
        </li>
      ))
    }
  </ul>

  <p class={seeAllClasses}>
    <Link to="https://github.com/norskeld" external underline={false}>
      See all projects &srarr;
    </Link>
  </p>
</section>
